/* client/src/components/styles/Blog.css */

/* Define blog-specific font variable for readability, defaulting to fallback */
:root {
  --font-family-blog-body: var(--font-family-fallback); /* More readable for content */
  --font-family-blog-card-title: "Helvetica Neue", Helvetica, Arial, sans-serif; /* A clean sans-serif for card titles */
  --blog-card-border-radius: 20px; /* Consistent rounded corners, slightly larger */
  --blog-lightbox-border-radius: 24px; /* Consistent lightbox radius */
  --blog-card-hover-glow: rgba(var(--highlight-color-poetic-rgb), 0.35);
  --blog-card-tap-glow: rgba(var(--primary-color-rgb), 0.25);
}

.blog-view-container {
    width: 100%; /* Allow parent in LanguageSelector to control max-width */
    /* max-width: 110vw; */ /* Likely overridden or not impactful if LanguageSelector constrains it */
    padding: 1.5rem clamp(1rem, 3vw, 1.5rem);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1.8rem; /* Increased gap */
    font-family: var(--font-family-poetic), var(--font-family-fallback);
    color: var(--text-color-poetic);
    position: relative;
}

.blog-view-title {
  font-size: clamp(2.2em, 5.5vw, 3em); /* Slightly larger and more responsive title */
  font-weight: 400;
  text-align: center;
  color: var(--highlight-color-poetic);
  text-shadow: 
    0 0 30px rgba(var(--highlight-color-poetic-rgb), 0.6),
    0 0 15px rgba(var(--highlight-color-poetic-rgb), 0.4),
    0 0 5px rgba(var(--primary-color-rgb), 0.2),
    0 2.5px 5px rgba(var(--background-color-rgb), 0.25);
  letter-spacing: 2.5px; /* More spacious */
  margin-bottom: 1.5rem;
  line-height: 1.3;
}

.blog-posts-list-wrapper {
  width: 100%;
  overflow: hidden; /* Essential for horizontal scroll clipping */
  position: relative;
  min-height: 480px; /* Ensure enough space for items */
  -webkit-mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent); /* Softer edges for scrolling list */
  mask-image: linear-gradient(to right, transparent, black 5%, black 95%, transparent);
}

.blog-posts-list {
  display: flex;
  flex-direction: row; /* Essential for horizontal layout */
}

/* Base style for all blog post items */
.blog-post-item {
  background-color: rgba(var(--card-background-rgb), 0.85); /* Slightly less transparent */
  border: 1.5px solid rgba(var(--border-color-rgb), 0.2); /* Softer border */
  border-radius: var(--blog-card-border-radius);
  padding: 1.4rem; /* More padding */
  box-shadow: 0 7px 22px -9px rgba(var(--background-color-rgb), 0.45),
              inset 0 0 12px rgba(var(--highlight-color-poetic-rgb), 0.04);
  overflow: hidden;
  flex-shrink: 0; /* Critical for scroll layout */
  margin-right: 1.8rem;
  display: flex;
  flex-direction: column;
  cursor: pointer;
  transition: transform 0.35s cubic-bezier(0.19, 1, 0.22, 1), 
              box-shadow 0.35s cubic-bezier(0.19, 1, 0.22, 1),
              border-color 0.3s ease;
  position: relative; 
  width: clamp(340px, 29vw, 390px); /* Slightly wider items */
  will-change: transform, box-shadow; /* Performance hint */
}


.blog-post-item.no-image {
  width: auto; 
  width: -moz-fit-content; 
  width: fit-content; 
  min-width: 230px; 
  max-width: clamp(310px, 27vw, 370px); 
  background-image: radial-gradient(circle at top left, rgba(var(--highlight-color-poetic-rgb), 0.03) 0%, transparent 40%),
                    radial-gradient(circle at bottom right, rgba(var(--primary-color-rgb), 0.02) 0%, transparent 40%);
  background-blend-mode: screen;
}


/* CSS Hover as fallback, Framer Motion will override */
.blog-post-item:hover {
    transform: translateY(-7px) scale(1.03);
    border-color: rgba(var(--highlight-color-poetic-rgb), 0.4);
    box-shadow: 0 18px 45px -15px var(--blog-card-hover-glow),
                0 0 25px rgba(var(--highlight-color-poetic-rgb), 0.22) inset,
                0 0 10px rgba(var(--primary-color-rgb),0.1) inset;
}

.blog-post-header {
  display: flex;
  align-items: center;
  gap: 0.9rem; /* Slightly more gap */
  margin-bottom: 1rem;
  flex-shrink: 0;
}

.blog-post-avatar {
  width: 42px; /* Larger avatar */
  height: 42px;
  border-radius: 50%;
  object-fit: cover;
  border: 2.5px solid rgba(var(--highlight-color-poetic-rgb), 0.4); /* Thicker border */
  box-shadow: 0 0 8px rgba(var(--highlight-color-poetic-rgb), 0.2);
  flex-shrink: 0;
}

.blog-post-author-info {
  display: flex;
  flex-direction: column;
  align-items: flex-start;
  min-width: 0;
}

.blog-post-author-name {
  font-weight: 500;
  color: var(--highlight-color-poetic);
  font-size: 1em; /* Larger author name */
  line-height: 1.3;
}

.blog-post-timestamp {
  font-size: 0.78em; /* Larger timestamp */
  color: var(--subtext-color-poetic);
  opacity: 0.9;
  line-height: 1.25;
}

.blog-post-body {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    min-height: 0; /* Allow shrinking if needed */
    margin-bottom: 0.85rem;
}

.blog-post-title {
  font-family: var(--font-family-blog-card-title);
  font-size: clamp(1.15em, 1.7vw, 1.4em); /* Larger title */
  color: var(--text-color-poetic);
  opacity: 0.98;
  margin: 0 0 0.8rem 0;
  font-weight: 600;
  flex-shrink: 0;
  line-height: 1.38;
  letter-spacing: 0.3px;
  text-shadow: 0 1px 2px rgba(var(--background-color-rgb), 0.1);
  display: -webkit-box;
  -webkit-line-clamp: 3; /* Max 3 lines */
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
 /* max-height calculation removed as -webkit-line-clamp handles it */
}


.blog-post-content {
  font-family: var(--font-family-blog-body);
  font-size: clamp(0.88em, 1.1vw, 0.98em); /* Slightly larger content font */
  line-height: 1.7; /* Better line height */
  color: var(--text-color-poetic);
  opacity: 0.92;
  white-space: pre-wrap;
  overflow-y: auto; /* Keep scroll for longer content */
  flex-grow: 1;
  max-height: 250px; /* Increased max height */
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--highlight-color-poetic-rgb), 0.5) rgba(var(--card-background-rgb),0.25);
  position: relative;
  padding-right: 5px; /* Space for scrollbar */
}

.blog-post-item.no-image .blog-post-content {
  max-height: none; 
  overflow-y: visible; 
}

/* Enhanced scrollbar styles */
.blog-post-content::-webkit-scrollbar { width: 8px; }
.blog-post-content::-webkit-scrollbar-track { background: rgba(var(--card-background-rgb),0.2); border-radius: 4px; margin: 2px 0; }
.blog-post-content::-webkit-scrollbar-thumb { 
    background-color: rgba(var(--highlight-color-poetic-rgb),0.4); 
    border-radius: 4px; 
    border: 2px solid rgba(var(--card-background-rgb),0.85); /* Create inset look */
    background-clip: content-box;
}
.blog-post-content::-webkit-scrollbar-thumb:hover { background-color: rgba(var(--highlight-color-poetic-rgb),0.6); }


/* Fade out effect for overflowing content */
.blog-post-content.has-overflow::after {
  content: '';
  position: absolute;
  bottom: 0;
  left: 0;
  right: 0; /* Match padding-right if content area has it */
  height: 3em; /* Increased height for a smoother fade */
  background: linear-gradient(to bottom, transparent, rgba(var(--card-background-rgb), 1) 95%);
  pointer-events: none;
}
.blog-post-item.no-image .blog-post-content.has-overflow::after {
  display: none;
}

.blog-post-item .read-more-prompt {
    display: block;
    text-align: right;
    font-size: 0.85em; /* Slightly larger */
    color: var(--highlight-color-poetic);
    opacity: 0.75;
    margin-top: 0.6rem;
    font-style: italic;
    font-family: var(--font-family-blog-body);
    transition: color 0.25s ease, opacity 0.25s ease, transform 0.2s ease;
    text-decoration: none;
    position: relative;
    padding-right: 1.2em; /* Space for potential arrow */
}
.blog-post-item .read-more-prompt::after { /* Simple arrow */
    content: 'â†’';
    position: absolute;
    right: 0;
    top: 50%;
    transform: translateY(-50%) translateX(-2px);
    opacity: 0;
    transition: opacity 0.25s ease, transform 0.25s ease;
    color: var(--primary-color);
}
.blog-post-item:hover .read-more-prompt {
    opacity: 1;
    color: var(--primary-color);
    transform: translateX(-3px); /* Slight pull effect */
}
.blog-post-item:hover .read-more-prompt::after {
    opacity: 1;
    transform: translateY(-50%) translateX(0px);
}


.blog-post-image {
  width: 100%;
  aspect-ratio: 16 / 9.5; /* Adjusted aspect ratio */
  max-height: 210px; /* Increased max height */
  object-fit: cover;
  border-radius: 12px; /* Softer radius */
  margin-top: auto; /* Pushes image to bottom */
  border: 1.5px solid rgba(var(--border-color-rgb), 0.25); /* Slightly thicker border */
  flex-shrink: 0;
  transition: transform 0.4s cubic-bezier(0.19, 1, 0.22, 1), filter 0.3s ease;
  filter: brightness(0.95) saturate(0.9);
}
.blog-post-item:hover .blog-post-image {
    transform: scale(1.05); /* Slight zoom on hover */
    filter: brightness(1.05) saturate(1);
}

.blog-status-message {
  text-align: center;
  font-style: italic;
  color: var(--subtext-color-poetic);
  padding: 3rem 1rem; /* More padding */
  font-size: 1.2em; /* Larger status message */
  width: 100%;
  min-height: 220px; /* Increased min height */
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
}
.blog-status-message.error {
  color: var(--error-color);
  font-weight: 400;
}

.blog-back-button { /* Already styled by .card-view-back-button via TSX component, this is placeholder */
  margin-top: 2.5rem;
  align-self: center;
}

/* --- BLOG LIGHTBOX STYLES --- */
.blog-lightbox-overlay {
  position: fixed;
  inset: 0;
  background-color: rgba(var(--card-background-rgb, 25, 25, 38), 0.97); /* Darker overlay */
  backdrop-filter: blur(22px) saturate(150%) brightness(0.9); /* Stronger blur */
  -webkit-backdrop-filter: blur(22px) saturate(150%) brightness(0.9);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 2000;
  padding: clamp(0.5rem, 2vw, 1rem); /* Responsive padding */
  box-sizing: border-box;
  font-family: var(--font-family-poetic), var(--font-family-fallback);
}

.blog-lightbox-content-wrapper {
  position: relative;
  width: 100%;
  height: 100%;
  max-width: clamp(90vw, 900px, 96vw); /* Increased max-width */
  max-height: 94vh; /* Increased max-height */
  display: flex;
  flex-direction: column;
  background-color: rgba(var(--background-color-rgb), 0.9); /* More opaque */
  border: 2px solid rgba(var(--border-color-rgb), 0.5); /* Stronger border */
  border-radius: var(--blog-lightbox-border-radius);
  box-shadow: 0 30px 80px rgba(0,0,0,0.65), 0 0 0 1px rgba(var(--highlight-color-poetic-rgb), 0.1); /* Enhanced shadow */
  overflow: hidden;
}

.blog-lightbox-header {
  padding: 1.5rem 2rem; /* Increased padding */
  border-bottom: 1.8px solid rgba(var(--border-color-rgb), 0.35); /* Thicker border */
  flex-shrink: 0;
  position: relative;
  background: linear-gradient(rgba(var(--card-background-rgb),0.3), rgba(var(--card-background-rgb),0.15));
}

.blog-lightbox-title {
  font-family: var(--font-family-poetic), var(--font-family-fallback);
  font-size: clamp(1.8em, 3vw, 2.5em); /* Larger title */
  font-weight: 400;
  color: var(--text-color-poetic);
  opacity: 0.98;
  margin: 0 auto;
  max-width: calc(100% - 120px); /* More space for title if buttons are larger */
  line-height: 1.4; /* Improved line height */
  letter-spacing: 1px; /* More letter spacing */
  text-align: center;
  text-shadow:
    0 1.5px 1.5px rgba(var(--background-color-rgb), 0.3),
    0 0 12px rgba(var(--highlight-color-poetic-rgb), 0.4),
    0 0 25px rgba(var(--highlight-color-poetic-rgb), 0.25);
  -webkit-box-orient: vertical;
  overflow: hidden;
  text-overflow: ellipsis;
}

.blog-lightbox-close-button {
  position: absolute;
  top: 50%;
  right: 1.8rem; /* More space */
  transform: translateY(-50%);
  background: transparent;
  border: none;
  color: rgba(var(--text-color-poetic-rgb), 0.8); /* Brighter base color */
  cursor: pointer;
  padding: 0.7rem; /* Larger click area */
  border-radius: 50%;
  transition: color 0.25s ease, background-color 0.25s ease, transform 0.25s ease, box-shadow 0.25s ease;
}
.blog-lightbox-close-button:hover {
  color: var(--error-color);
  background-color: rgba(var(--error-color-rgb), 0.22);
  transform: translateY(-50%) scale(1.2) rotate(180deg); /* More pronounced rotate */
  box-shadow: 0 0 15px rgba(var(--error-color-rgb),0.35);
}
.blog-lightbox-close-button svg { width: 32px; height: 32px; } /* Larger icon */

.blog-lightbox-scrollable-content {
  flex-grow: 1;
  overflow-y: auto;
  padding: 2rem 2.2rem; /* Increased padding */
  scrollbar-width: thin;
  scrollbar-color: rgba(var(--highlight-color-poetic-rgb), 0.6) rgba(var(--card-background-rgb),0.4);
}
.blog-lightbox-scrollable-content::-webkit-scrollbar { width: 9px; } /* Thicker scrollbar */
.blog-lightbox-scrollable-content::-webkit-scrollbar-track { background: rgba(var(--card-background-rgb),0.3); border-radius: 4.5px; }
.blog-lightbox-scrollable-content::-webkit-scrollbar-thumb { background-color: rgba(var(--highlight-color-poetic-rgb),0.5); border-radius: 4.5px; border: 2px solid rgba(var(--background-color-rgb),0.9); background-clip: content-box;}
.blog-lightbox-scrollable-content::-webkit-scrollbar-thumb:hover { background-color: rgba(var(--highlight-color-poetic-rgb),0.7); }

.blog-lightbox-image {
  width: 100%;
  max-height: 55vh; /* Increased max height for image */
  object-fit: cover;
  border-radius: 16px; /* Larger radius */
  margin-bottom: 2rem; /* More space below image */
  border: 2px solid rgba(var(--border-color-rgb), 0.3); /* Thicker border */
  box-shadow: 0 8px 25px rgba(0,0,0,0.25); /* Enhanced shadow */
}

.blog-lightbox-full-content {
  font-family: var(--font-family-blog-body);
  font-size: clamp(1.1em, 1.3vw, 1.2em); /* Larger font for content */
  line-height: 1.9; /* Better line height for readability */
  color: var(--text-color-poetic);
  opacity: 1; /* Fully opaque content */
  white-space: pre-wrap;
  margin-bottom: 2rem;
}
.blog-lightbox-full-content p {
    margin-bottom: 1.3em; /* More space between paragraphs */
}
.blog-lightbox-full-content p:last-child {
    margin-bottom: 0;
}

.blog-lightbox-meta-container {
  margin-bottom: 1.8rem; /* More space */
  text-align: left;
}

.blog-lightbox-meta-author {
  font-family: var(--font-family-poetic);
  font-size: 1.15em; /* Larger author name */
  color: var(--highlight-color-poetic);
  font-weight: 500;
  margin-bottom: 0.35rem;
}
.blog-lightbox-meta-timestamp {
  font-family: var(--font-family-blog-body);
  font-size: 0.95em; /* Larger timestamp */
  color: var(--subtext-color-poetic);
  opacity: 0.9;
}

.blog-lightbox-meta-divider {
  height: 1.5px; /* Thicker divider */
  background: linear-gradient(to right, transparent, rgba(var(--border-color-rgb), 0.4), transparent);
  margin: 1.8rem 0; /* More space around divider */
}

.blog-lightbox-nav-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(var(--card-background-rgb, 30, 30, 46), 0.65); /* More opaque */
  color: rgba(var(--text-color-poetic-rgb, 230, 230, 230), 0.9); /* Brighter icon */
  border: 2px solid rgba(var(--border-color-rgb),0.35); /* Thicker border */
  border-radius: 50%;
  width: 50px; /* Larger buttons */
  height: 50px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 10;
  transition: all 0.3s cubic-bezier(0.19, 1, 0.22, 1); /* Smoother transition */
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
}
.blog-lightbox-nav-button.prev { left: 1.5rem; } /* More space from edge */
.blog-lightbox-nav-button.next { right: 1.5rem; }
.blog-lightbox-nav-button:hover {
  background-color: rgba(var(--primary-color-rgb),0.25);
  color: var(--primary-color);
  border-color: rgba(var(--primary-color-rgb),0.45);
  transform: translateY(-50%) scale(1.18); /* More pronounced scale */
  box-shadow: 0 0 18px rgba(var(--primary-color-rgb), 0.4);
}
.blog-lightbox-nav-button:disabled {
  opacity: 0.25; /* More obvious disabled state */
  cursor: not-allowed;
  transform: translateY(-50%) scale(1);
  background-color: rgba(var(--card-background-rgb, 30, 30, 46), 0.25);
  border-color: rgba(var(--border-color-rgb),0.15);
  box-shadow: none;
}

@media (max-width: 768px) {
  .blog-view-container { max-width: 98vw; padding: 1.5rem clamp(0.8rem, 3vw, 1.2rem);}
  .blog-post-item.with-image { width: clamp(300px, 43vw, 370px); }
  .blog-post-item.no-image {
    min-width: 210px;
    max-width: clamp(270px, 41vw, 350px); 
  }
  .blog-post-item { margin-right: 1.6rem; padding: 1.2rem; }
  .blog-post-header { margin-bottom: 0.8rem;}
  .blog-post-avatar { width: 38px; height: 38px;}
  .blog-post-author-name { font-size: 0.9em;}
  .blog-post-timestamp { font-size: 0.7em;}
  .blog-post-title { font-size: clamp(1.1em, 1.6vw, 1.3em); margin-bottom: 0.6rem;}
  .blog-post-content { font-size: clamp(0.85em, 1.05vw, 0.95em); line-height: 1.65; max-height: 240px; }
  .blog-post-image { max-height: 190px;}
  .blog-lightbox-content-wrapper { max-width: 95vw; max-height: 90vh; }
  .blog-lightbox-title { font-size: clamp(1.6em, 2.8vw, 2.2em); max-width: calc(100% - 100px); }
  .blog-lightbox-close-button svg { width: 28px; height: 28px; }
  .blog-lightbox-nav-button { width: 46px; height: 46px; }
  .blog-lightbox-nav-button.prev { left: 1rem; }
  .blog-lightbox-nav-button.next { right: 1rem; }
  .blog-lightbox-scrollable-content { padding: 1.8rem; }
  .blog-lightbox-full-content { font-size: clamp(1.05em, 1.2vw, 1.15em); }
}

@media (max-width: 600px) {
 .blog-view-container { padding: 1.2rem clamp(0.5rem, 2vw, 1rem); max-width: 100vw; }
 .blog-posts-list-wrapper { min-height: auto; -webkit-mask-image: none; mask-image: none; } /* Disable mask for smaller screens or single column lists */
 .blog-post-item.with-image { width: clamp(280px, 80vw, 340px); }
 .blog-post-item.no-image {
    min-width: 190px;
    max-width: clamp(230px, 78vw, 310px); 
  }
 .blog-post-item { margin-right: 1.3rem; padding: 1rem; }
 .blog-post-content { max-height: 220px; }
 .blog-post-image { max-height: 180px; }
 .blog-lightbox-header { padding: 1.3rem; }
 .blog-lightbox-title { font-size: clamp(1.5em, 4.8vw, 2em); max-width: calc(100% - 85px); }
 .blog-lightbox-scrollable-content { padding: 1.5rem 1.6rem; }
 .blog-lightbox-full-content { font-size: clamp(1em, 3vw, 1.1em); }
 .blog-lightbox-nav-button { width: 42px; height: 42px;}
}